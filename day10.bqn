_DoWhile_ â† {ğ•¨ ğ”½â€¢_while_ğ”¾ ğ•¨ğ”½ğ•©}
Pad â† âŠ¢â†‘ËÂ·â‰âŸœÂ¬2+â‰¢
MDSlash â† /â—‹â¥ŠâŸœâ†•âŸœâ‰¢

input â† â€¢file.Lines "input10.txt"

dirs â† [Â¯1â€¿0, 1â€¿0, 0â€¿Â¯1, 0â€¿1 ]
[n,s,w,e] â† =âŒœËœâ†•4
[k, oc] â† â‰[
  âŸ¨'.', 4â¥Š0âŸ©
  âŸ¨'S', n âˆ¨ s âˆ¨ e âˆ¨ wâŸ©
  âŸ¨'|', n âˆ¨ sâŸ©
  âŸ¨'-', e âˆ¨ wâŸ©
  âŸ¨'L', n âˆ¨ eâŸ©
  âŸ¨'J', n âˆ¨ wâŸ©
  âŸ¨'7', s âˆ¨ wâŸ©
  âŸ¨'F', s âˆ¨ eâŸ©
]
ic â† kâŠ["S|7F","S|LJ","S-LF","S-J7"]

grid â† Pad kâŠ>input
start â† âŠ‘ MDSlash 1=grid
Out â† âŠ‘ oc âŠËœ âŠ‘âŸœgrid # outward connections
In â† ic âŠ‘âŸœgridâŠ¸âˆŠËœË˜ âŠ¢ # inward connections
Next â† {1<â‰ ğ•©?Â¯2âŠğ•©;0} {âŠ (ğ•¨âŠ¸â‰¢Ë˜âˆ§ (Out ğ•©) âˆ§ In)âŠ¸/ dirs+â‰1 ğ•©} Â¯1âŠâŠ¢

loop â† Â¯1â†“ âˆ¾âŸœNext _DoWhile_ (âŠâ‰¢Â¯1âŠâŠ¢) [start]

â€¢Show 2Ã·Ëœâ‰ loop

# make mask of loop from list
lâ†Ã—Â´dâ†â‰¢grid
border â† dâ¥Š lâ†‘ /â¼ (1Â«Ã—`âŒ¾âŒ½d) (+Â´Ã—)â‰1 loop

# Replace 'S' with correct pipe
stype â† {ğ•Š[a,s,b]: oc âŠ‘âˆ˜âŠ âˆ¨Ë(âˆ§Ëdirs â‰âŠ¸= -âŸœs)Â¨aâ€¿b}3â†‘Â¯1âŒ½loop
grid stypeâŒ¾(startâŠ¸âŠ‘)â†©

â€¢Show +Â´â¥Š border{ğ•¨ Â¬âŠ¸âˆ§ â‰ `âŠ¸âˆ¨Ë˜ ğ•¨âˆ§âˆŠâŸœ2â€¿4â€¿5Ë˜ğ•©}grid
