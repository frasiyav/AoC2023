âŸ¨ Split, lf, ToNats âŸ© â† â€¢Import "bqn-libs/strings.bqn"

i â† Â¯1â†“â€¢file.Chars "input19.txt"

workflowsâ€¿parts â† lf SplitÂ¨ (2â¥Šlf)Split i
[id,wf] â† â‰>('{'Split Â¯1â†“âŠ¢)Â¨ workflows
parts ToNatsÂ¨â†©
_KF â† {fsâŠ‘ËœâŠ‘idâŠ<ğ•—}

IVSplit â† {vğ•Šcâ€¿d: âŒ½âŸd < {ğ•©âŒ¾(câŠ¸âŠ)ğ•¨}Â¨Â·âŒ½âŒ¾âŠ‘ (v+d)âˆ¾Â¨câŠâŠ¢}
ParseWF â† {
  r â† âŒ½>Â¯2â†‘Â¨':'SplitÂ¨','Split ğ•©
  r (â‹ˆËœË™âˆ¾Â·(âŠ‘âˆ˜ToNats IVSplit 4|"xmas<>"âŠ2â†‘âŠ¢)Â¨1â†“âŠ¢)âŒ¾(âŠË˜)â†©
  {râ€¿dğ•Šğ•©: d _KFâŠ¸âŠ¢Â´Rğ•©}ËâŸœr
}
accept â† âŸ¨âŸ© â‹„ A â† {acceptâˆ¾â†©<ğ•©} â‹„ idâˆ¾â†©<"A"
fs â† Aâ€¿@ âˆ¾Ëœ ParseWFÂ¨wf

"in"_KF 4â€¿2â¥Š1â€¿4001

â€¢Show +Â´âˆ¾ parts Ã— âˆ¨Ëâˆ§Â´Â¨ 1= accept â‹Ë˜âŒœ parts
â€¢Show +Â´(Ã—Â´-ËœÂ´Ë˜)Â¨accept
